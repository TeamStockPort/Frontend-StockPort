import ChartFilterBar from "@/_MarketDetailPage/components/ChartFilterBar";
import ReactECharts from "echarts-for-react";

// 이 배열을 props로 받음
const mockData = [
  {
    baseDate: "20251021",
    openPrice: 72000,
    closePrice: 72600,
    highPrice: 72800,
    lowPrice: 71500,
    changeAmount: 600,
    changeRate: 0.83,
  },
  {
    baseDate: "20251022",
    openPrice: 72600,
    closePrice: 73200,
    highPrice: 73300,
    lowPrice: 72000,
    changeAmount: 600,
    changeRate: 0.83,
  },
  {
    baseDate: "20251023",
    openPrice: 73200,
    closePrice: 73500,
    highPrice: 73800,
    lowPrice: 73000,
    changeAmount: 300,
    changeRate: 0.41,
  },
  {
    baseDate: "20251024",
    openPrice: 73500,
    closePrice: 73000,
    highPrice: 73700,
    lowPrice: 72800,
    changeAmount: -500,
    changeRate: -0.68,
  },
  {
    baseDate: "20251025",
    openPrice: 73000,
    closePrice: 73300,
    highPrice: 73400,
    lowPrice: 72700,
    changeAmount: 300,
    changeRate: 0.41,
  },
  {
    baseDate: "20251026",
    openPrice: 73300,
    closePrice: 73100,
    highPrice: 73500,
    lowPrice: 72900,
    changeAmount: -200,
    changeRate: -0.27,
  },
  {
    baseDate: "20251027",
    openPrice: 73100,
    closePrice: 74000,
    highPrice: 74200,
    lowPrice: 72800,
    changeAmount: 900,
    changeRate: 1.23,
  },

  {
    baseDate: "20251028",
    openPrice: 74000,
    closePrice: 74400,
    highPrice: 74600,
    lowPrice: 73800,
    changeAmount: 400,
    changeRate: 0.54,
  },
  {
    baseDate: "20251029",
    openPrice: 74400,
    closePrice: 74800,
    highPrice: 75000,
    lowPrice: 74200,
    changeAmount: 400,
    changeRate: 0.54,
  },
  {
    baseDate: "20251030",
    openPrice: 74800,
    closePrice: 74500,
    highPrice: 75100,
    lowPrice: 74400,
    changeAmount: -300,
    changeRate: -0.4,
  },
  {
    baseDate: "20251031",
    openPrice: 74500,
    closePrice: 74900,
    highPrice: 75100,
    lowPrice: 74200,
    changeAmount: 400,
    changeRate: 0.54,
  },

  {
    baseDate: "20251101",
    openPrice: 74900,
    closePrice: 75300,
    highPrice: 75600,
    lowPrice: 74600,
    changeAmount: 400,
    changeRate: 0.53,
  },
  {
    baseDate: "20251102",
    openPrice: 75300,
    closePrice: 75100,
    highPrice: 75500,
    lowPrice: 74800,
    changeAmount: -200,
    changeRate: -0.27,
  },
  {
    baseDate: "20251103",
    openPrice: 75100,
    closePrice: 75800,
    highPrice: 76000,
    lowPrice: 74800,
    changeAmount: 700,
    changeRate: 0.93,
  },
  {
    baseDate: "20251104",
    openPrice: 75800,
    closePrice: 76200,
    highPrice: 76500,
    lowPrice: 75600,
    changeAmount: 400,
    changeRate: 0.53,
  },
  {
    baseDate: "20251105",
    openPrice: 76200,
    closePrice: 76000,
    highPrice: 76400,
    lowPrice: 75800,
    changeAmount: -200,
    changeRate: -0.26,
  },
  {
    baseDate: "20251106",
    openPrice: 76000,
    closePrice: 76400,
    highPrice: 76600,
    lowPrice: 75700,
    changeAmount: 400,
    changeRate: 0.52,
  },
  {
    baseDate: "20251107",
    openPrice: 76400,
    closePrice: 77000,
    highPrice: 77300,
    lowPrice: 76300,
    changeAmount: 600,
    changeRate: 0.79,
  },
  {
    baseDate: "20251108",
    openPrice: 77000,
    closePrice: 76800,
    highPrice: 77200,
    lowPrice: 76700,
    changeAmount: -200,
    changeRate: -0.26,
  },
  {
    baseDate: "20251109",
    openPrice: 76800,
    closePrice: 77100,
    highPrice: 77300,
    lowPrice: 76700,
    changeAmount: 300,
    changeRate: 0.39,
  },
  {
    baseDate: "20251110",
    openPrice: 77100,
    closePrice: 77600,
    highPrice: 77800,
    lowPrice: 76900,
    changeAmount: 500,
    changeRate: 0.65,
  },
  {
    baseDate: "20251111",
    openPrice: 77600,
    closePrice: 77900,
    highPrice: 78000,
    lowPrice: 77300,
    changeAmount: 300,
    changeRate: 0.39,
  },
  {
    baseDate: "20251112",
    openPrice: 77900,
    closePrice: 78100,
    highPrice: 78400,
    lowPrice: 77700,
    changeAmount: 200,
    changeRate: 0.26,
  },
  {
    baseDate: "20251113",
    openPrice: 78100,
    closePrice: 77900,
    highPrice: 78300,
    lowPrice: 77700,
    changeAmount: -200,
    changeRate: -0.26,
  },
  {
    baseDate: "20251114",
    openPrice: 77900,
    closePrice: 78200,
    highPrice: 78400,
    lowPrice: 77800,
    changeAmount: 300,
    changeRate: 0.38,
  },
  {
    baseDate: "20251115",
    openPrice: 78200,
    closePrice: 78600,
    highPrice: 78900,
    lowPrice: 78000,
    changeAmount: 400,
    changeRate: 0.51,
  },
  {
    baseDate: "20251116",
    openPrice: 78600,
    closePrice: 78400,
    highPrice: 78800,
    lowPrice: 78300,
    changeAmount: -200,
    changeRate: -0.25,
  },
  {
    baseDate: "20251117",
    openPrice: 78400,
    closePrice: 79000,
    highPrice: 79200,
    lowPrice: 78300,
    changeAmount: 600,
    changeRate: 0.77,
  },
  {
    baseDate: "20251118",
    openPrice: 79000,
    closePrice: 79300,
    highPrice: 79500,
    lowPrice: 78800,
    changeAmount: 300,
    changeRate: 0.38,
  },
  {
    baseDate: "20251119",
    openPrice: 79300,
    closePrice: 79700,
    highPrice: 80000,
    lowPrice: 79200,
    changeAmount: 400,
    changeRate: 0.5,
  },
  {
    baseDate: "20251120",
    openPrice: 79700,
    closePrice: 79400,
    highPrice: 79900,
    lowPrice: 79200,
    changeAmount: -300,
    changeRate: -0.38,
  },
];

const StockChart = () => {
  const dates = mockData.map((item) => item.baseDate);
  const candleData = mockData.map((item) => [
    item.openPrice,
    item.closePrice,
    item.lowPrice,
    item.highPrice,
  ]);

  const option = {
    animation: true,
    grid: {
      left: 10,
      right: 60,
      top: 30,
      bottom: 30,
    },
    tooltip: {
      trigger: "axis",
    },
    xAxis: {
      type: "category",
      data: dates,
      scale: true,
      boundaryGap: ["0%", "10%"],
      axisLine: { show: false },
      axisTick: { show: false },
      axisLabel: { show: true, color: "#9aa0a6", fontSize: 12 },
      min: "dataMin",
      max: "dataMax",
      axisPointer: {
        show: true,
      },
    },
    yAxis: {
      position: "right",
      scale: true,
      splitNumber: 4,
      axisLine: { show: false },
      splitLine: {
        show: true,
        lineStyle: {
          type: "solid",
          color: "rgba(255,255,255,0.3)",
          width: 1,
        },
      },
      axisTick: { show: false },
      axisLabel: {
        show: true,
        inside: false,
        color: "#9aa0a6",
      },
    },
    series: {
      type: "candlestick",
      data: candleData,
      itemStyle: {
        color: "#d35b5b",
        color0: "#4a90e2",
        borderColor: "#d35b5b",
        borderColor0: "#4a90e2",
      },
    },
  };
  return (
    <div className="flex-col gap-20 m-10 w-full">
      <ChartFilterBar />
      <ReactECharts option={option} style={{ height: 500 }} />
    </div>
  );
};
export default StockChart;
